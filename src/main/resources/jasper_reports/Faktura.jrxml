<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Faktura" pageWidth="595" pageHeight="842" whenNoDataType="BlankPage" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="adresa" class="java.lang.String"/>
	<parameter name="pib" class="java.lang.String"/>
	<parameter name="maticni_broj" class="java.lang.String"/>
	<parameter name="tekuci_racun" class="java.lang.String"/>
	<parameter name="naziv" class="java.lang.String"/>
	<parameter name="id_fakture" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT
     poreska_stopa.iznos_stope*stavke_fakture_otpremnice.osnovica_pdv/100 AS iznos_pdv,
     stavke_fakture_otpremnice.osnovica_pdv+0.01*poreska_stopa.iznos_stope*stavke_fakture_otpremnice.osnovica_pdv-stavke_fakture_otpremnice.rabat AS ukupno,
     pr.`adresa` AS adresa,
     pr.`naziv` AS naziv,
     pr.`pib` AS pib,
     pr.`tekuci_racun` AS tekuci_racun,
     pr.`maticni_broj` AS maticni_broj,
     f.`fa_broj` AS fa_broj,
     f.`fa_datum` AS fa_datum,
     f.`fa_rabat` AS fa_rabat,
     f.`fa_porez` AS fa_porez,
     f.`fa_iznos` AS fa_iznos,
     f.`fa_ukupno` AS fa_ukupno,
     stavke_fakture_otpremnice.`ID_STAVKE_FAKTURE` AS stavke_fakture_otpremnice_ID_STAVKE_FAKTURE,
     stavke_fakture_otpremnice.`ID_ARTIKLA` AS stavke_fakture_otpremnice_ID_ARTIKLA,
     stavke_fakture_otpremnice.`ID_FAKTURE_OTPREMNICE` AS stavke_fakture_otpremnice_ID_FAKTURE_OTPREMNICE,
     stavke_fakture_otpremnice.`KOLICINA` AS stavke_fakture_otpremnice_KOLICINA,
     stavke_fakture_otpremnice.`RABAT` AS stavke_fakture_otpremnice_RABAT,
     stavke_fakture_otpremnice.`OSNOVICA_PDV` AS stavke_fakture_otpremnice_OSNOVICA_PDV,
     stavke_fakture_otpremnice.`JEDINICNA_CENA_STAVKE_FAKTURE` AS stavke_fakture_otpremnice_JEDINICNA_CENA_STAVKE_FAKTURE,
     katalog_robe_i_usluga.`NAZIV_ARTIKLA` AS katalog_robe_i_usluga_NAZIV_ARTIKLA,
     jedinice_mere.`NAZIV_JEDINICE_MERE` AS jedinice_mere_NAZIV_JEDINICE_MERE,
     grupa_proizvoda.`ID_GRUPE` AS grupa_proizvoda_ID_GRUPE,
     grupa_proizvoda.`ID_POREZA` AS grupa_proizvoda_ID_POREZA,
     porez.`ID_POREZA` AS porez_ID_POREZA,
     porez.`POS_VAZI` AS porez_POS_VAZI,
     poreska_stopa.`ID_STOPE` AS poreska_stopa_ID_STOPE,
     poreska_stopa.`IZNOS_STOPE` AS poreska_stopa_IZNOS_STOPE,
     f.`ADRESA_ISPORUKE` AS f_ADRESA_ISPORUKE,
     f.`BROJ_KAMIONA` AS f_BROJ_KAMIONA,
     f.`ROBU_I_RACUN_IZDAO` AS f_ROBU_I_RACUN_IZDAO,
     f.`ROBU_I_RACUN_PREUZEO` AS f_ROBU_I_RACUN_PREUZEO
FROM
     `faktura_otpremnica` f LEFT OUTER JOIN `poslovni_partner` p ON f.`id_partnerstva` = p.`id_partnerstva`
     INNER JOIN `stavke_fakture_otpremnice` stavke_fakture_otpremnice ON f.`ID_FAKTURE_OTPREMNICE` = stavke_fakture_otpremnice.`ID_FAKTURE_OTPREMNICE`
     INNER JOIN `katalog_robe_i_usluga` katalog_robe_i_usluga ON stavke_fakture_otpremnice.`ID_ARTIKLA` = katalog_robe_i_usluga.`ID_ARTIKLA`
     INNER JOIN `grupa_proizvoda` grupa_proizvoda ON katalog_robe_i_usluga.`ID_GRUPE` = grupa_proizvoda.`ID_GRUPE`
     INNER JOIN `jedinice_mere` jedinice_mere ON katalog_robe_i_usluga.`ID_JEDINICE_MERE` = jedinice_mere.`ID_JEDINICE_MERE`
     INNER JOIN `preduzece` pr ON grupa_proizvoda.`ID_PREDUZECA` = pr.`ID_PREDUZECA`
     INNER JOIN `porez` porez ON grupa_proizvoda.`ID_POREZA` = porez.`ID_POREZA`
     INNER JOIN `poreska_stopa` poreska_stopa ON porez.`ID_POREZA` = poreska_stopa.`ID_POREZA`
     AND pr.`ID_PREDUZECA` = p.`ID_PREDUZECA`
WHERE
     f.ID_FAKTURE_OTPREMNICE = $P{id_fakture} and
     stavke_fakture_otpremnice.ID_FAKTURE_OTPREMNICE = $P{id_fakture} and
     poreska_stopa.DATUM_VAZENJA = ( SELECT (max(ps.datum_vazenja)) FROM `poreska_stopa` ps WHERE ps.ID_POREZA = porez.ID_POREZA )]]>
	</queryString>
	<field name="iznos_pdv" class="java.math.BigDecimal"/>
	<field name="ukupno" class="java.math.BigDecimal"/>
	<field name="adresa" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="naziv" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="pib" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tekuci_racun" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="maticni_broj" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_broj" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_datum" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_rabat" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_porez" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_iznos" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fa_ukupno" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="stavke_fakture_otpremnice_ID_STAVKE_FAKTURE" class="java.lang.Long"/>
	<field name="stavke_fakture_otpremnice_ID_ARTIKLA" class="java.lang.Long"/>
	<field name="stavke_fakture_otpremnice_ID_FAKTURE_OTPREMNICE" class="java.lang.Long"/>
	<field name="stavke_fakture_otpremnice_KOLICINA" class="java.math.BigDecimal"/>
	<field name="stavke_fakture_otpremnice_RABAT" class="java.math.BigDecimal"/>
	<field name="stavke_fakture_otpremnice_OSNOVICA_PDV" class="java.math.BigDecimal"/>
	<field name="stavke_fakture_otpremnice_JEDINICNA_CENA_STAVKE_FAKTURE" class="java.math.BigDecimal"/>
	<field name="katalog_robe_i_usluga_NAZIV_ARTIKLA" class="java.lang.String"/>
	<field name="jedinice_mere_NAZIV_JEDINICE_MERE" class="java.lang.String"/>
	<field name="grupa_proizvoda_ID_GRUPE" class="java.lang.Long"/>
	<field name="grupa_proizvoda_ID_POREZA" class="java.lang.Long"/>
	<field name="porez_ID_POREZA" class="java.lang.Long"/>
	<field name="porez_POS_VAZI" class="java.lang.Boolean"/>
	<field name="poreska_stopa_ID_STOPE" class="java.lang.Long"/>
	<field name="poreska_stopa_IZNOS_STOPE" class="java.math.BigDecimal"/>
	<field name="f_ADRESA_ISPORUKE" class="java.lang.String"/>
	<field name="f_BROJ_KAMIONA" class="java.lang.String"/>
	<field name="f_ROBU_I_RACUN_IZDAO" class="java.lang.String"/>
	<field name="f_ROBU_I_RACUN_PREUZEO" class="java.lang.String"/>
	<background>
		<band/>
	</background>
	<title>
		<band height="139">
			<staticText>
				<reportElement x="0" y="0" width="119" height="14"/>
				<textElement lineSpacing="Single">
					<font fontName="Arial" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[Naziv izdavaoca računa:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="14" width="136" height="14"/>
				<textElement lineSpacing="Single">
					<font fontName="Serif"/>
				</textElement>
				<text><![CDATA[Adresa izdavaoca računa:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="28" width="136" height="14"/>
				<textElement lineSpacing="Single">
					<font fontName="Serif"/>
				</textElement>
				<text><![CDATA[PIB izdavaoca računa:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="42" width="153" height="14"/>
				<textElement lineSpacing="Single">
					<font fontName="Serif"/>
				</textElement>
				<text><![CDATA[Matični br. izdavaoca računa:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="56" width="100" height="14"/>
				<textElement lineSpacing="Single">
					<font fontName="Serif"/>
				</textElement>
				<text><![CDATA[Tekući račun:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="0" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Naziv kupca:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="14" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Adresa kupca:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="28" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[PIB kupca:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="42" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Matični broj kupca:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="56" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Tekući račun:]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="85" width="100" height="26"/>
				<textElement lineSpacing="Single">
					<font size="16"/>
				</textElement>
				<text><![CDATA[Datum izd. fakture:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="85" width="178" height="26"/>
				<textElement lineSpacing="Single">
					<font size="16"/>
				</textElement>
				<text><![CDATA[Račun - otpremnica broj:]]></text>
			</staticText>
			<textField>
				<reportElement x="441" y="85" width="100" height="26"/>
				<textElement lineSpacing="Single">
					<font size="18"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_datum}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="196" y="85" width="104" height="26"/>
				<textElement lineSpacing="Single">
					<font size="16"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_broj}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="438" y="14" width="117" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{adresa}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="438" y="28" width="117" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{pib}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="437" y="42" width="118" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{maticni_broj}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="437" y="56" width="118" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{tekuci_racun}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="438" y="0" width="117" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$P{naziv}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="152" y="0" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{naziv}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="152" y="14" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{adresa}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="152" y="28" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{pib}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="152" y="42" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{maticni_broj}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="152" y="56" width="100" height="14"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{tekuci_racun}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="20">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="20"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="0" width="24" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[R.br]]></text>
			</staticText>
			<staticText>
				<reportElement x="24" y="0" width="81" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Naziv]]></text>
			</staticText>
			<staticText>
				<reportElement x="105" y="0" width="48" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Jed.mere]]></text>
			</staticText>
			<staticText>
				<reportElement x="152" y="0" width="44" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Kolicina]]></text>
			</staticText>
			<staticText>
				<reportElement x="196" y="0" width="59" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Jed. cena]]></text>
			</staticText>
			<staticText>
				<reportElement x="255" y="0" width="45" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Rabat]]></text>
			</staticText>
			<staticText>
				<reportElement x="300" y="0" width="84" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Poreska osn.]]></text>
			</staticText>
			<staticText>
				<reportElement x="382" y="0" width="73" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Iznos pdv]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="0" width="100" height="20"/>
				<textElement lineSpacing="Single">
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Ukupna naknada]]></text>
			</staticText>
		</band>
	</pageHeader>
	<detail>
		<band height="20">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="20"/>
			</rectangle>
			<textField>
				<reportElement x="24" y="0" width="81" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{katalog_robe_i_usluga_NAZIV_ARTIKLA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="105" y="0" width="48" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{jedinice_mere_NAZIV_JEDINICE_MERE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="153" y="0" width="43" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{stavke_fakture_otpremnice_KOLICINA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="196" y="0" width="59" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{stavke_fakture_otpremnice_JEDINICNA_CENA_STAVKE_FAKTURE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="255" y="0" width="45" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{stavke_fakture_otpremnice_RABAT}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="300" y="0" width="84" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{stavke_fakture_otpremnice_OSNOVICA_PDV}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00">
				<reportElement x="384" y="0" width="71" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{iznos_pdv}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00">
				<reportElement x="455" y="0" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ukupno}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="3" y="0" width="21" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[  $V{COLUMN_COUNT}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="161">
			<staticText>
				<reportElement x="326" y="135" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Robu primio:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="113" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Broj kamiona:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="133" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Robu izdao:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="93" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[Adresa isporuke:]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="0" width="57" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[IZNOS:]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="60" width="69" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[ZA UPLATU:]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="20" width="57" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[RABAT:]]></text>
			</staticText>
			<staticText>
				<reportElement x="384" y="40" width="57" height="20"/>
				<textElement lineSpacing="Single"/>
				<text><![CDATA[PDV:]]></text>
			</staticText>
			<textField>
				<reportElement x="455" y="20" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_rabat}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="40" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_porez}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="60" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_iznos}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="0" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{fa_ukupno}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="119" y="93" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{f_ADRESA_ISPORUKE}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="119" y="115" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{f_BROJ_KAMIONA}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="119" y="135" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{f_ROBU_I_RACUN_IZDAO}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="426" y="135" width="100" height="20"/>
				<textElement lineSpacing="Single"/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{f_ROBU_I_RACUN_PREUZEO}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
